(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{398:function(t,a,e){"use strict";e.r(a);var s=e(42),n=Object(s.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"mocha-入门教程"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#mocha-入门教程"}},[t._v("#")]),t._v(" Mocha 入门教程")]),t._v(" "),e("p",[e("a",{attrs:{href:"http://mochajs.org",target:"_blank",rel:"noopener noreferrer"}},[t._v("Mocha"),e("OutboundLink")],1),t._v(" 是现在最流行的 JavaScript 测试框架（JavaScript test framework）之一。官方给它自己定义的三个特点是："),e("code",[t._v("simple")]),t._v("、"),e("code",[t._v("flexible")]),t._v("、"),e("code",[t._v("fun")]),t._v("。本文为 "),e("a",{attrs:{href:"http://mochajs.org",target:"_blank",rel:"noopener noreferrer"}},[t._v("Mocha"),e("OutboundLink")],1),t._v(" 的入门教程。")]),t._v(" "),e("blockquote",[e("p",[t._v("Mocha is a feature-rich JavaScript test framework running on "),e("a",{attrs:{href:"http://nodejs.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Node.js"),e("OutboundLink")],1),t._v(" and in the browser, making asynchronous testing "),e("em",[t._v("simple")]),t._v(" and "),e("em",[t._v("fun")]),t._v(". Mocha tests run serially, allowing for flexible and accurate reporting, while mapping uncaught exceptions to the correct test cases.")])]),t._v(" "),e("p",[e("img",{attrs:{src:"index_files/64653ac1-af3c-4950-a60a-8d7bab65405a.png",alt:""}})]),t._v(" "),e("h2",{attrs:{id:"_1-安装"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-安装"}},[t._v("#")]),t._v(" 1. 安装")]),t._v(" "),e("p",[t._v("推荐将 Mocha 安装在项目中：")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("$ "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" mocha --save-dev\n")])])]),e("p",[t._v("有时候为了操作的方便，也可以将其安装到全局:")]),t._v(" "),e("blockquote",[e("p",[t._v("但不推荐安装在全局，可以使用 "),e("code",[t._v("npx")]),t._v(" 也能方便执行命令，详见 "),e("a",{attrs:{href:"https://github.com/matmanjs/test-automation-training/tree/master/mocha/01.getting-started",target:"_blank",rel:"noopener noreferrer"}},[t._v("01.getting-started"),e("OutboundLink")],1),t._v(" 。")])]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("$ "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" -g mocha\n")])])]),e("h2",{attrs:{id:"_2-使用-mocha-chai-写单元测试"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-使用-mocha-chai-写单元测试"}},[t._v("#")]),t._v(" 2. 使用 Mocha + Chai 写单元测试")]),t._v(" "),e("h3",{attrs:{id:"_2-1-安装断言库-chai"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-安装断言库-chai"}},[t._v("#")]),t._v(" 2.1 安装断言库 Chai")]),t._v(" "),e("p",[t._v("Mocha 通常配合 "),e("a",{attrs:{href:"https://www.chaijs.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Chai"),e("OutboundLink")],1),t._v(" 使用，因此需要在项目中安装：")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("$ "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" chai --save-dev\n")])])]),e("h3",{attrs:{id:"_2-2-简单示例"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-简单示例"}},[t._v("#")]),t._v(" 2.2 简单示例")]),t._v(" "),e("p",[t._v("接下来我们看一个简单的例子，该例子完整代码可以查看  "),e("a",{attrs:{href:"https://github.com/matmanjs/test-automation-training/tree/master/mocha/01.getting-started",target:"_blank",rel:"noopener noreferrer"}},[t._v("01.getting-started"),e("OutboundLink")],1),t._v(" 。")]),t._v(" "),e("p",[t._v("源码 "),e("code",[t._v("add.js")]),t._v(" :")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v("module"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("exports")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("x"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" y")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" x "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" y"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("p",[t._v("测试脚本 "),e("code",[t._v("add.test.js")]),t._v(" :")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" add "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./add.js'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" expect "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'chai'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("describe")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'加法函数的测试'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("it")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'1 加 1 应该等于 2'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("expect")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("to"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("be"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("equal")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("p",[t._v("运行查看结果：")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("$ npx mocha add.test.js\n")])])]),e("p",[e("img",{attrs:{src:"index_files/ebcd460c-38aa-42d5-b864-5b7f8abdb20d.jpg",alt:""}})]),t._v(" "),e("h3",{attrs:{id:"_2-3-关于-mocha-的几个重要概念"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-关于-mocha-的几个重要概念"}},[t._v("#")]),t._v(" 2.3 关于 Mocha 的几个重要概念")]),t._v(" "),e("p",[t._v("Mocha 中有几个重要概念需要了解：")]),t._v(" "),e("ul",[e("li",[e("code",[t._v("测试脚本")]),t._v("：测试用例的脚本，通常命名为 "),e("code",[t._v("*.test.js")]),t._v(" 或 "),e("code",[t._v("*.spec.js")]),t._v("，例如上述示例中的 "),e("code",[t._v("add.test.js")]),t._v(" 。一般情况下测试脚本是按功能模块划分，一个测试脚本里面包含一个或多个 "),e("code",[t._v("describe")]),t._v(" 块")]),t._v(" "),e("li",[e("code",[t._v("describe")]),t._v(' 块：称为"测试套件"（test suite），表示一组相关的测试。一个 '),e("code",[t._v("describe")]),t._v(" 块里面包含一个或多个 "),e("code",[t._v("it")]),t._v(" 块，甚至  "),e("code",[t._v("describe")]),t._v(" 块里面还可能包含 "),e("code",[t._v("describe")]),t._v(" 块")]),t._v(" "),e("li",[e("code",[t._v("it")]),t._v(' 块：称为"测试用例"（test case），表示一个单独的测试，是测试的最小单位。一个 '),e("code",[t._v("it")]),t._v(" 块里面包含一个或多个 "),e("code",[t._v("断言")])]),t._v(" "),e("li",[e("code",[t._v("断言")]),t._v(" ：用于预判、校验用例逻辑的执行结果，在上述示例中，我们使用了 Chai 来写断言")])]),t._v(" "),e("p",[e("img",{attrs:{src:"index_files/7a89afc3-c087-4d51-b79b-56d84f02a4c6.jpg",alt:""}})]),t._v(" "),e("h2",{attrs:{id:"_3-mocha-学习手册"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-mocha-学习手册"}},[t._v("#")]),t._v(" 3. Mocha 学习手册")]),t._v(" "),e("p",[t._v("除了官方站点 https://mochajs.org/ 已经提供的文档之外，我们根据 mocha 最常见的场景进行了梳理，划分了不同的学习主题，每一个学习主题均有示例，推荐大家下载 https://github.com/matmanjs/test-automation-training/tree/master/mocha 项目进行实践。")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://github.com/matmanjs/test-automation-training/tree/master/mocha/01.getting-started",target:"_blank",rel:"noopener noreferrer"}},[t._v("01.getting-started"),e("OutboundLink")],1),t._v(": 最简单的示例，适合入门")]),t._v(" "),e("li",[e("a",{attrs:{href:"https://github.com/matmanjs/test-automation-training/tree/master/mocha/02.mocha-test-directory",target:"_blank",rel:"noopener noreferrer"}},[t._v("02.mocha-test-directory"),e("OutboundLink")],1),t._v(": 测试用例放置的目录")]),t._v(" "),e("li",[e("a",{attrs:{href:"https://github.com/matmanjs/test-automation-training/tree/master/mocha/03.command-line-argument",target:"_blank",rel:"noopener noreferrer"}},[t._v("03.command-line-argument"),e("OutboundLink")],1),t._v(": 命令参数")]),t._v(" "),e("li",[e("a",{attrs:{href:"https://github.com/matmanjs/test-automation-training/tree/master/mocha/04.configuring-mocha",target:"_blank",rel:"noopener noreferrer"}},[t._v("04.configuring-mocha"),e("OutboundLink")],1),t._v(": mocha 的配置文件")]),t._v(" "),e("li",[e("a",{attrs:{href:"https://github.com/matmanjs/test-automation-training/tree/master/mocha/05.es6",target:"_blank",rel:"noopener noreferrer"}},[t._v("05.es6"),e("OutboundLink")],1),t._v(": es6 的场景")]),t._v(" "),e("li",[e("a",{attrs:{href:"https://github.com/matmanjs/test-automation-training/tree/master/mocha/06.ts",target:"_blank",rel:"noopener noreferrer"}},[t._v("06.ts"),e("OutboundLink")],1),t._v(": TypeScript 场景")]),t._v(" "),e("li",[e("a",{attrs:{href:"https://github.com/matmanjs/test-automation-training/tree/master/mocha/07.async",target:"_blank",rel:"noopener noreferrer"}},[t._v("07.async"),e("OutboundLink")],1),t._v(": 异步函数处理场景")]),t._v(" "),e("li",[e("a",{attrs:{href:"https://github.com/matmanjs/test-automation-training/tree/master/mocha/08.hooks",target:"_blank",rel:"noopener noreferrer"}},[t._v("08.hooks"),e("OutboundLink")],1),t._v(": 勾子事件，可做初始化或清理")]),t._v(" "),e("li",[e("a",{attrs:{href:"https://github.com/matmanjs/test-automation-training/tree/master/mocha/09.exclusive-or-inclusive-tests",target:"_blank",rel:"noopener noreferrer"}},[t._v("09.exclusive-or-inclusive-tests"),e("OutboundLink")],1),t._v(": 限定执行哪些用例")]),t._v(" "),e("li",[e("a",{attrs:{href:"https://github.com/matmanjs/test-automation-training/tree/master/mocha/10.in-browser",target:"_blank",rel:"noopener noreferrer"}},[t._v("10.in-browser"),e("OutboundLink")],1),t._v(": 浏览器里面使用 mocha")]),t._v(" "),e("li",[e("a",{attrs:{href:"https://github.com/matmanjs/test-automation-training/tree/master/mocha/11.reporters",target:"_blank",rel:"noopener noreferrer"}},[t._v("11.reporters"),e("OutboundLink")],1),t._v(": 测试结果的报告输出")]),t._v(" "),e("li",[e("a",{attrs:{href:"https://github.com/matmanjs/test-automation-training/tree/master/mocha/31.custom-resolve-paths",target:"_blank",rel:"noopener noreferrer"}},[t._v("31.custom-resolve-paths"),e("OutboundLink")],1),t._v(": 自定义模块路径下的处理")])]),t._v(" "),e("h2",{attrs:{id:"_4-使用-mocha-做单元测试的项目实践"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-使用-mocha-做单元测试的项目实践"}},[t._v("#")]),t._v(" 4. 使用 Mocha 做单元测试的项目实践")]),t._v(" "),e("p",[t._v("在实际项目工程中使用 Mocha 做单元测试时，还需要考虑单元测试覆盖率等，为此，我们提供了一些范本案例，希望能够帮助你快速的为你的项目接入单元测试：")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://github.com/matmanjs/test-automation-training/tree/master/sample-mocha-chai",target:"_blank",rel:"noopener noreferrer"}},[t._v("sample-mocha-chai"),e("OutboundLink")],1),t._v(" ：es6 项目")]),t._v(" "),e("li",[e("a",{attrs:{href:"https://github.com/matmanjs/test-automation-training/tree/master/sample-mocha-chai-ts",target:"_blank",rel:"noopener noreferrer"}},[t._v("sample-mocha-chai-ts"),e("OutboundLink")],1),t._v(" ： TypeScript 项目")])])])}),[],!1,null,null,null);a.default=n.exports}}]);